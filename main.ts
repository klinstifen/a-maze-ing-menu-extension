/**
 * A titlescreen and menu extension for A-MAZE-ING
 */

//% color="#AA278D" weight=100
namespace A_MAZE_ING {


    const playerSprite = SpriteKind.create()
    const SPRITE_KIND_UX = SpriteKind.create()
    const SPRITE_KIND_MENU = SpriteKind.create()

    //% block
    //% group="configure"
    //% x.defl=0
    export function setLevelCount(x: number){
        numLevels = x
    }

    //% block
    //% group="menus"
    //% weight=60
    //% characterImg.shadow="screen_image_picker"
    export function loadTitleMenu (characterImg: Image) {
        scene.setBackgroundImage(img`
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ..3333333333333333333333..........9999..........99999....999999999999.....999999999999999999...999999999999999.......3333..3333......233333.......33333333333333
            ..3333333333333333333333..........9999..........99999....999999999999.....999999999999999999...999999999999999.......3333..3333333...233333.......33333333333333
            ..3333333333333333333333..........9999999.......99999..99999999999999999..999999999999999999...999999999999999.......3333..3333333...233333.......33333333333333
            3333333333333333333333333333......9999999.....9999999..99998888888889999..999999999999999998...999999999999999.......3333..3333333...233333.....3333332222222222
            3333333333333333333333333333......9999999.....9999999..99998888888889999..888888888888899998...999999999999999.......3333..3333333...233333.....3333332222222222
            3333333333333333333333333333......9999999999999999999..99998888888889999..88888888888899998....999988888888888.......3333..33333333..233333.....3332222222222222
            3333222222222222222222223333......9999999999999999999..99998888888889999..88888888888899998....999988888888888.......3333..33333333..233333..3333332222.........
            3333222222222222222222223333......9999888999988899999..99998888888889999..8888888888899998.....999988888888888.......3333..33332333..233333..3333332222.........
            3333222222222222222222223333......9999888999988899999..99998888888889999..8888888888899998.....999988888888888.......3333..33332333..233333..33322222...........
            3333222222222222222222223333......9999888888888899999..99998888888889999..888888888899998......9999..................3333..333323333.233333..33322222...........
            3333222222222222222222223333......9999888888888899999..99998888888889999..888888888899998......9999..................3333..333323333.233333..33322222...........
            3333....................3333......9999888888888899999..9999.........9999...........99998.......9999..................3333..333322333.233333..333................
            3333....................3333......9999..888888..99999..99999999999999999...........99998.......9999..................3333..333322333.233333..333................
            3333333333333333333333333333......9999..888888..99999..99999999999999999..........99998........999999999999999.......3333..3333223333233333..333................
            3333333333333333333333333333......9999..........99999..99999999999999999..........99998........999999999999999.......3333..3333223333233333..333................
            3333333333333333333333333333......9999..........99999..99998888888889999.........99998.........999999999999999.......3333..3333.22333233333..333.....33333333333
            3333333333333333333333333333......9999..........99999..99998888888889999.........99998.........999999999999999.......3333..3333.22333233333..333.....33333333333
            3333222222222222222222223333......9999..........99999..99998888888889999........99998..........999999999999999.......3333..3333.22333233333..333.....33333333333
            3333222222222222222222223333......9999..........99999..99998888888889999........99998..........999988888888888.......3333..3333.22333333333..333.....33333333333
            3333222222222222222222223333......9999..........99999..99998888888889999.......99998...........999988888888888.......3333..3333.22333333333..333.....33333333333
            3333222222222222222222223333......9999..........99999..9999.........9999.......99998...........999988888888888.......3333..3333..2233333333..333.....22222233333
            3333222222222222222222223333......9999..........99999..9999.........9999......99998............999988888888888.......3333..3333..2233333333..333.....22222233333
            3333....................3333......9999..........99999..9999.........9999......99998............9999..................3333..3333..2233333333..333.....22222233333
            3333....................3333......9999..........99999..9999.........9999.....99998.............9999..................3333..3333..2233333333..33333...22222233333
            3333....................3333......9999..........99999..9999.........9999.....99998.............9999..................3333..3333...223333333..33333.........33333
            3333....................3333......9999..........99999..9999.........9999....99998..............9999..................3333..3333...223333333..33333333......33333
            3333....................3333......9999..........99999..9999.........9999....99998..............9999..................3333..3333...223333333..33333333......33333
            3333....................3333......9999..........99999..9999.........9999...99998...............9999999999999999......3333..3333...223333333..3333333333333333333
            3333....................3333......9999..........99999..9999.........9999...999999999999999999..9999999999999999......3333..3333....22333333..2223333333333333333
            3333....................3333......9999..........99999..9999.........9999..9999999999999999999..9999999999999999......3333..3333....22333333..2223333333333333333
            3333....................3333......9999..........99999..9999.........9999..9999999999999999999..9999999999999999......3333..3333....22333333..2222223333333333333
            3333....................3333......9999..........99999..9999.........9999..9999999999999999999..9999999999999999......3333..3333....22333333..2222223333333333333
            2222....................2222......8888..........88888..8888.........8888..8888888888888888888..8888888888888888......2222..2222......222222..2222222222222222222
            2222....................2222......8888..........88888..8888.........8888..8888888888888888888..8888888888888888......2222..2222......222222.....2222222222222222
            2222....................2222......8888..........88888..8888.........8888..8888888888888888888..8888888888888888......2222..2222......222222.....2222222222222222
            2222....................2222......8888..........88888..8888.........8888..8888888888888888888..8888888888888888......2222..2222......222222.....2222222222222222
            2222....................2222......8888..........88888..8888.........8888..8888888888888888888..8888888888888888......2222..2222......222222.....2222222222222222
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            5555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555
            5555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555
            5555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555
            ................................................................................................555.............................................................
            ................................................................................................555.............................................................
            ................................................................................................555.............................................................
            ...5555555555555555555555555555555555555555...55555555555555555555555555555555555555555555555...555...555555555555555...5555555555555555555555555555555555555...
            ...5555555555555555555555555555555555555555...55555555555555555555555555555555555555555555555...555...555555555555555...5555555555555555555555555555555555555...
            ...5555555555555555555555555555555555555555...55555555555555555555555555555555555555555555555...555...555555555555555...5555555555555555555555555555555555555...
            ...555..................................555...555.........................................555...555...555...555...555...555...............................555...
            ...555..................................555...555.........................................555...555555555...555...555555555...............................555...
            ...555..................................555...555.........................................555...555555555...555...555555555...5555555555555555555555555555555...
            ...5555555555555555555555555555555555...555...555.........................................555...555555555...555...555555555...5555555555555555555555555555555...
            ...5555555555555555555555555555555555...555...555.........................................555...............555...............5555555555555555555555555555555...
            ...5555555555555555555555555555555555...555...555.........................................555...............555.................................................
            ..................................555...555...555.........................................555...............555.................................................
            ..................................555...555...555.........................................5555555555555555555555555555555555555555555555555555555555555555555555
            ..................................555...555...555.........................................5555555555555555555555555555555555555555555555555555555555555555555555
            ...5555555555555555555555555555...555...555...555.........................................5555555555555555555555555555555555555555555555555555555555555555555555
            ...5555555555555555555555555555...555...555...555...............................................................................................................
            ...5555555555555555555555555555...555...555...555...............................................................................................................
            ...555......................555...555...555...555...............................................................................................................
            ...555......................555...555...555...555.........................................5555555555555555555555555555555555555555555555555555555555555555555...
            ...555......................555...555...555...555.........................................5555555555555555555555555555555555555555555555555555555555555555555...
            ...555...5555555555555555...555...555...555...555.........................................5555555555555555555555555555555555555555555555555555555555555555555...
            ...555...5555555555555555...555...555...555...555.........................................555.............................................................555...
            ...555...5555555555555555...555...555...555...555.........................................555.............................................................555...
            ...555...555..........555...555...555...555...555.........................................555.............................................................555...
            ...555...555..........555...555...555...555...555.........................................555...5555555555555555555555555555555555555555555555555555555555555...
            ...555...555..........555...555...555...555...555.........................................555...5555555555555555555555555555555555555555555555555555555555555...
            ...555...555...555....555...555...555...555...555.........................................555...5555555555555555555555555555555555555555555555555555555555555...
            ...555...555...555....555...555...555...555...555.........................................555...555.............................................................
            ...555...555...555....555...555...555...555...555.........................................555...555.............................................................
            ...555...555...555....555...555...555...555...555.........................................555...555.............................................................
            ...555...555...555....555...555...555...555...555.........................................555...555...5555555555555555555555555555555555555555555555555555555555
            ...555...555...555....555...555...555...555...555.........................................555...555...5555555555555555555555555555555555555555555555555555555555
            ...555...555...555....555...555...555...555...555.........................................555...555...5555555555555555555555555555555555555555555555555555555555
            ...555...555...555....555...555...555...555...555.........................................555...555...555.......................................................
            ...555...555...555....555...555...555...555...555.........................................555...555...555.......................................................
            ...555...555...5555555555...555...555...555...555.........................................555...555...555.......................................................
            ...555...555...5555555555...555...555...555...555.........................................555...555...555...5555555555555555555555555555555555555555555555555...
            ...555...555...5555555555...555...555...555...555.........................................555...555...555...5555555555555555555555555555555555555555555555555...
            ...555...555................555...555...555...555.........................................555...555...555...5555555555555555555555555555555555555555555555555...
            ...555...555................555...555...555...555.........................................555...555...555...555...........................................555...
            ...555...555................555...555...555...555.........................................555...555...555...555...........................................555...
            ...555...5555555555555555555555...555...555...55555555555555555555555555555555555555555555555...555...555...555...........................................555...
            ...555...5555555555555555555555...555...555...55555555555555555555555555555555555555555555555...555...555...555...555...5555555555555555555555555555555...555...
            ...555...5555555555555555555555...555...555...55555555555555555555555555555555555555555555555...555...555...555...555...5555555555555555555555555555555...555...
            ...555............................555...555.....................................................555...555...555...555...5555555555555555555555555555555...555...
            ...555............................555...555.....................................................555...555...555...555.....................................555...
            ...555............................555...555.....................................................555...555...555...555.....................................555...
            ...5555555555555555555555555555555555...55555555555555555555555555555555555555555555555555555555555...555...555...555.....................................555...
            ...5555555555555555555555555555555555...55555555555555555555555555555555555555555555555555555555555...555...555...555......5555555555555555555555555555...555...
            ...5555555555555555555555555555555555...55555555555555555555555555555555555555555555555555555555555...555...555...555......5555555555555555555555555555...555...
            ......................................................................................................555...555...555......5555555555555555555555555555...555...
            ......................................................................................................555...555...555...............................555...555...
            ......................................................................................................555...555...555...............................555...555...
            555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555...555...5555555555555555555555555555555555555555555...
            555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555...555...5555555555555555555555555555555555555555555...
            555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555...555...5555555555555555555555555555555555555555555...
            ............................................................................................................555.................................................
            ............................................................................................................555.................................................
            ............................................................................................................555.................................................
            5555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555
            5555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555
            5555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555
            ................................................................................................................................................................
            `)
        titleScreen = 1
        if (characterImg.equals(img`
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . .
        `)) {
            titleCharacterImg = img`
                ..........bd.............d......
                ..........bddddddddeeeeedd......
                ...........bbbbbbbbeeeeebb......
                ................eeeedd22........
                ...............eeedddddd5.......
                .............4444eeeeeddd.......
                ............444ddddeeeddd.......
                ...........4444ddddddee.........
                ..........44444ddddddddd........
                ..........44444ddddddddd........
                .........44.444dddddddd4........
                .........44...4dddddddd4........
                ........444..44ddddddd444.......
                ........444..4444dddd4444.......
                .......444...44dddddd..44.......
                ......444...444dddddd..44.......
                ......44...eeeddddddd...4.......
                ......44..eeeeedddddd..44.......
                ......44..eeeeedddddd..4........
                ......445..eeeedddddce.4........
                ......555..eee..ddddcce4........
                ...........eee....cccc44e.......
                ...........eee....ccccc.ee......
                ..........eee......cccc..ee...d.
                ..........eee.......ccc...ee..d.
                ..........eee.......ccc...deedd.
                .....fffffeeefffff..cc...1ddeed.
                .ffffffffffeefffffcccfff.1dddee.
                ..fffffffffeeffffffccfff.11ddde.
                ....fffffff5eefffffcccfff.111d..
                .....ffffff555fffff5ccffffff1d..
                ......fffff555fffff555ffffff111.
                `
        } else {
            titleCharacterImg = characterImg
        }
        titleCharacter = sprites.create(titleCharacterImg, SPRITE_KIND_UX)
        pressA = sprites.create(img`
            ................................
            .999999..999999...9999.9999.9999
            .9999999.9999999..9999.9999.9999
            .9988899.9988899..9988.9988.9988
            .9988899.9988899..9988.9988.9988
            .99...99.99...99..99...99...99..
            .9999998.9999999..9999.9999.9999
            .9999998.9999998..9999.9999.9999
            .998888..998998...9988.8899.8899
            .998888..998899...9988.8899.8899
            .99......99.8899..99.....99...99
            .99......99..8899.9999.9999.9999
            .99......99...899.9999.9999.9999
            .88......88....88.8888.8888.8888
            .88......88....88.8888.8888.8888
            ................................
            ..............99999999..........
            ..............99999999..........
            .............9988888899.........
            .............9988888899.........
            .............99......99.........
            .............99......99.........
            .............9999999999.........
            .............9999999999.........
            .............9988888899.........
            .............9988888899.........
            .............99......99.........
            .............99......99.........
            .............99......99.........
            .............88......88.........
            .............88......88.........
            ................................
            `, SPRITE_KIND_UX)
        titleCharacter.setPosition(70, 80)
        pressA.setPosition(70, 80)
        while (titleScreen == 1) {
            titleCharacter.setFlag(SpriteFlag.Invisible, true)
            pressA.setFlag(SpriteFlag.Invisible, false)
            pause(500)
            titleCharacter.setFlag(SpriteFlag.Invisible, false)
            pressA.setFlag(SpriteFlag.Invisible, true)
            pause(500)
        }
        titleCharacter.setFlag(SpriteFlag.Invisible, true)
        pressA.setFlag(SpriteFlag.Invisible, true)
        loadLevelsMenu()
    }

    //% block
    //% group="menus"
    export function loadLevelsMenu () {
        store = sprites.create(img`
            9 9 9 . 9 9 9 9 9 . 9 9 9 9 . 9 9 9 9 . 9 9 9 . 
            9 . . . . . 9 . . . 9 . . 9 . 9 . . 9 . 9 . . . 
            9 . . . . . 9 . . . 9 . . 9 . 9 . . 9 . 9 . . . 
            9 9 9 . . . 9 . . . 9 . . 9 . 9 9 9 9 . 9 9 9 . 
            . . 9 . . . 9 . . . 9 . . 9 . 9 9 . . . 9 . . . 
            . . 9 . . . 9 . . . 9 . . 9 . 9 . 9 . . 9 . . . 
            . . 9 . . . 9 . . . 9 . . 9 . 9 . . 9 . 9 . . . 
            9 9 9 . . . 9 . . . 9 9 9 9 . 9 . . 9 . 9 9 9 . 
            `, SPRITE_KIND_MENU)
        lvl1 = sprites.create(img`
            9 9 . 9 . . . . 9 . 9 9 . . . . . . . 9 9 9 9 . 
            9 9 . 9 . . . . 9 . 9 9 . . . . . . . 9 9 9 9 . 
            9 9 . 9 . . . . 9 . 9 9 . . . . . . . . . 9 9 . 
            9 9 . . 9 . . 9 . . 9 9 . . . . . . . . . 9 9 . 
            9 9 . . 9 . . 9 . . 9 9 . . . . . . . . . 9 9 . 
            9 9 . . . 9 9 . . . 9 9 . . . . . . . . . 9 9 . 
            9 9 9 9 . 9 9 . . . 9 9 9 9 . . . . . . . 9 9 . 
            9 9 9 9 . 9 9 . . . 9 9 9 9 . . . . . . . 9 9 . 
            `, SPRITE_KIND_MENU)
        lvl2 = sprites.create(img`
            9 9 . 9 . . . . 9 . 9 9 . . . . . . 9 9 9 9 . . 
            9 9 . 9 . . . . 9 . 9 9 . . . . . 9 9 9 9 9 9 . 
            9 9 . 9 . . . . 9 . 9 9 . . . . . 9 9 . . 9 9 . 
            9 9 . . 9 . . 9 . . 9 9 . . . . . . . . 9 9 . . 
            9 9 . . 9 . . 9 . . 9 9 . . . . . . 9 9 9 9 . . 
            9 9 . . . 9 9 . . . 9 9 . . . . . . 9 9 . . . . 
            9 9 9 9 . 9 9 . . . 9 9 9 9 . . . 9 9 9 9 9 9 . 
            9 9 9 9 . 9 9 . . . 9 9 9 9 . . . 9 9 9 9 9 9 . 
            `, SPRITE_KIND_MENU)
        lvl3 = sprites.create(img`
            9 9 . 9 . . . . 9 . 9 9 . . . . . . 9 9 9 9 9 . 
            9 9 . 9 . . . . 9 . 9 9 . . . . . . 9 9 9 9 9 . 
            9 9 . 9 . . . . 9 . 9 9 . . . . . . . . . . 9 . 
            9 9 . . 9 . . 9 . . 9 9 . . . . . . . 9 9 9 9 . 
            9 9 . . 9 . . 9 . . 9 9 . . . . . . . 9 9 9 9 . 
            9 9 . . . 9 9 . . . 9 9 . . . . . . . . . . 9 . 
            9 9 9 9 . 9 9 . . . 9 9 9 9 . . . . 9 9 9 9 9 . 
            9 9 9 9 . 9 9 . . . 9 9 9 9 . . . . 9 9 9 9 9 . 
            `, SPRITE_KIND_MENU)
        lvl4 = sprites.create(img`
            9 9 . 9 . . . . 9 . 9 9 . . . . . . 9 9 . 9 9 . 
            9 9 . 9 . . . . 9 . 9 9 . . . . . . 9 9 . 9 9 . 
            9 9 . 9 . . . . 9 . 9 9 . . . . . . 9 9 . 9 9 . 
            9 9 . . 9 . . 9 . . 9 9 . . . . . . 9 9 9 9 9 . 
            9 9 . . 9 . . 9 . . 9 9 . . . . . . 9 9 9 9 9 . 
            9 9 . . . 9 9 . . . 9 9 . . . . . . . . . 9 9 . 
            9 9 9 9 . 9 9 . . . 9 9 9 9 . . . . . . . 9 9 . 
            9 9 9 9 . 9 9 . . . 9 9 9 9 . . . . . . . 9 9 . 
            `, SPRITE_KIND_MENU)
        lvl5 = sprites.create(img`
            9 9 . 9 . . . . 9 . 9 9 . . . . . . 9 9 9 9 9 . 
            9 9 . 9 . . . . 9 . 9 9 . . . . . . 9 9 9 9 9 . 
            9 9 . 9 . . . . 9 . 9 9 . . . . . . 9 9 . . . . 
            9 9 . . 9 . . 9 . . 9 9 . . . . . . 9 9 . . . . 
            9 9 . . 9 . . 9 . . 9 9 . . . . . . 9 9 9 9 9 . 
            9 9 . . . 9 9 . . . 9 9 . . . . . . . . . 9 9 . 
            9 9 9 9 . 9 9 . . . 9 9 9 9 . . . . 9 9 9 9 9 . 
            9 9 9 9 . 9 9 . . . 9 9 9 9 . . . . 9 9 9 9 9 . 
            `, SPRITE_KIND_MENU)
        lvl6 = sprites.create(img`
            9 9 . 9 . . . . 9 . 9 9 . . . . . . 9 9 . . . . 
            9 9 . 9 . . . . 9 . 9 9 . . . . . . 9 9 . . . . 
            9 9 . 9 . . . . 9 . 9 9 . . . . . . 9 9 . . . . 
            9 9 . . 9 . . 9 . . 9 9 . . . . . . 9 9 9 9 9 . 
            9 9 . . 9 . . 9 . . 9 9 . . . . . . 9 9 . . 9 . 
            9 9 . . . 9 9 . . . 9 9 . . . . . . 9 9 . . 9 . 
            9 9 9 9 . 9 9 . . . 9 9 9 9 . . . . 9 9 9 9 9 . 
            9 9 9 9 . 9 9 . . . 9 9 9 9 . . . . 9 9 9 9 9 . 
            `, SPRITE_KIND_MENU)
        lvl7 = sprites.create(img`
            9 9 . 9 . . . . 9 . 9 9 . . . . . 9 9 9 9 9 . . 
            9 9 . 9 . . . . 9 . 9 9 . . . . . 9 9 9 9 9 . . 
            9 9 . 9 . . . . 9 . 9 9 . . . . . . . . 9 9 . . 
            9 9 . . 9 . . 9 . . 9 9 . . . . . . . 9 9 9 9 . 
            9 9 . . 9 . . 9 . . 9 9 . . . . . . . 9 9 9 9 . 
            9 9 . . . 9 9 . . . 9 9 . . . . . . . . 9 9 . . 
            9 9 9 9 . 9 9 . . . 9 9 9 9 . . . . . . 9 9 . . 
            9 9 9 9 . 9 9 . . . 9 9 9 9 . . . . . . 9 9 . . 
            `, SPRITE_KIND_MENU)
        lvl8 = sprites.create(img`
            9 9 . 9 . . . . 9 . 9 9 . . . . . . 9 9 9 9 . . 
            9 9 . 9 . . . . 9 . 9 9 . . . . . . 9 . . 9 . . 
            9 9 . 9 . . . . 9 . 9 9 . . . . . . 9 . . 9 . . 
            9 9 . . 9 . . 9 . . 9 9 . . . . . . 9 9 9 9 . . 
            9 9 . . 9 . . 9 . . 9 9 . . . . . . 9 9 9 9 . . 
            9 9 . . . 9 9 . . . 9 9 . . . . . . 9 . . 9 . . 
            9 9 9 9 . 9 9 . . . 9 9 9 9 . . . . 9 . . 9 . . 
            9 9 9 9 . 9 9 . . . 9 9 9 9 . . . . 9 9 9 9 . . 
            `, SPRITE_KIND_MENU)
        store.setPosition(75,70)
        lvl1.setPosition(75, 80)
        lvl2.setPosition(75, 90)
        lvl3.setPosition(75, 100)
        lvl4.setPosition(75, 110)
        lvl5.setPosition(75, 120)
        lvl6.setPosition(75, 130)
        lvl7.setPosition(75, 140)
        lvl8.setPosition(75, 150)
        cursor = sprites.create(img`
            . . . . . . f f f f f f 
            . . . 3 3 3 f f f f f f 
            . . 3 3 3 3 3 f f f f f 
            . . 3 3 3 3 3 f f f f f 
            . . 3 3 3 3 3 f f f f f 
            . . 2 3 3 3 2 f f f f f 
            . . . 2 2 2 f f f f f f 
            . . . . . . f f f f f f 
            `, playerSprite)
        cursor.setPosition(58, 80)
        cursor.z = -10
        menuList = sprites.allOfKind(SPRITE_KIND_MENU)
        for(let i = numLevels+1; i < maxLevels; i++){
            menuList.pop().destroy()
        }
        levelMenu = 1
        for (let value of menuList) {
            if (value.y > 90 || value.y < 70) {
                value.setFlag(SpriteFlag.Invisible, true)
            }
        }
    }

    //% block
    //% group="info"
    export function selectedLevel () {
        while (levelMenu) {
            for(let choice of menuList){
                if(cursor.overlapsWith(choice)){
                    levelChoice = menuList.indexOf(choice)
                }
            }
            /**if (cursor.overlapsWith(lvl1)) {
                levelChoice = 1
            } else if (cursor.overlapsWith(lvl2)) {
                levelChoice = 2
            } else {
                levelChoice = 3
            }**/
            pause(200)
        }
        cursor.setFlag(SpriteFlag.Invisible, true)
        for (let value of menuList) {
            value.setFlag(SpriteFlag.Invisible, true)
        }
        scene.setBackgroundImage(img`
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            `)
        return levelChoice
    }
    controller.A.onEvent(ControllerButtonEvent.Pressed, function () {
        if (titleScreen) {
            titleScreen = 0
        } else if (levelMenu) {
            levelMenu = 0
        }
    })

    
    controller.down.onEvent(ControllerButtonEvent.Pressed, function () {
        if (levelMenu == 1) {
            if (controller.down.isPressed()) {
                if(menuList[menuList.length-1].y != 80){
                    for (let value of menuList) {
                        value.y -= 10
                        if (value.y < 70 || value.y > 90) {
                            value.setFlag(SpriteFlag.Invisible, true)
                        } else {
                            value.setFlag(SpriteFlag.Invisible, false)
                        }
                    }
                } 
            }
        }
    })

    controller.up.onEvent(ControllerButtonEvent.Pressed, function() {
        if (levelMenu == 1) {
            if (controller.up.isPressed()) {
                if(menuList[0].y != 80){
                    for (let value of menuList) {
                        value.y += 10
                        if (value.y > 90 || value.y < 70){
                            value.setFlag(SpriteFlag.Invisible, true)
                        } else {
                            value.setFlag(SpriteFlag.Invisible, false)
                        }
                    }
                }
            }
        }
    })

    let store: Sprite = null
    let lvl8: Sprite = null
    let lvl7: Sprite = null
    let lvl6: Sprite = null
    let lvl5: Sprite = null
    let lvl4: Sprite = null
    let lvl3: Sprite = null
    let pressA: Sprite = null
    let titleCharacter: Sprite = null
    let titleScreen = 0
    let menuList: Sprite[] = []
    let levelChoice = 0
    let lvl2: Sprite = null
    let lvl1: Sprite = null
    let cursor: Sprite = null
    let levelMenu = 0
    let titleCharacterImg: Image = null
    let maxLevels = 9
    let numLevels = 0

}